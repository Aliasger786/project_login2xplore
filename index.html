
<!DOCTYPE html>
<html>
<head>
	<title>Login & Registration System</title>
	<meta charset="UTF-8">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
	<meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" type="text/css" href="style.css">
  <link href="https://fonts.googleapis.com/css?family=Nunito:400,600,700,800&display=swap" rel="stylesheet">

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

  <style type="text/css">
    .img:before{
  content: '';
  position: absolute;
  right: 0;
  top: 0;
  width: 900px;
  height: 100%;
  background-image: url(fre.jpg);
  background-size: cover;
  transition: -webkit-transform 1.2s ease-in-out;
  transition: transform 1.2s ease-in-out, -webkit-transform 1.2s ease-in-out;
}
.img:after{
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.1);
}
  </style>
</head>
<body style="background:-webkit-linear-gradient(left, #ffb225, #f5b320); z-index: -1;">

  <div class="cont" >
    <div class="form sign-in" >
      <h2>Sign In</h2>
      <form method="post" >
      <label>
        <span>Email Address</span>
        <input type="email" name="em" id="email1" required>
      </label>
       
      <label>
        <span>Password</span>
        <input type="password" name="pwd" id="pw1" required>
      </label>

      <input type="submit" name="s2" value="Sign in" style="width: 105px; height: 35px; padding: 6px; color: white; border-radius: 5px;  background: -webkit-linear-gradient(left, #7579ff, #b224ef); margin-left: 240px; margin-top: 25px" onclick="loginHost();">
      </form>
</div>

    <div class="sub-cont"  >
      <div class="img">
        <div class="img-text m-up">
          <h2>Don't have an Account?</h2>
          <p style="font-size: 19px;">Sign up with us!</p>
        </div>
        <div class="img-text m-in">
          <h2>Already have an Account?</h2>
          <p style="font-size: 19px;"> Just Sign in</p>
        </div>
        <div class="img-btn">
          <span class="m-up">Sign Up</span>
          <span class="m-in">Sign In</span>
        </div>
      </div>
      <div class="form sign-up">
        <form method="post" >
        <h2>Sign Up</h2>
        <label>
          <span>Name</span>
          <input type="text" name="f" id="name" required>
        </label>
        <label>
          <span>Email</span>
          <input type="email" name="em" id="email" required>
        </label>
         <label>
        <span>Phone </span>
        <input type="text" name="ph" minlength="10" maxlength="10" id="phone" required>
      </label>
        <label>
          <span>Password</span>
          <input type="password" name="pwd"  id="password" required>
        </label>
        <label>
          <span>Confirm Password</span>
          <input type="password" name="cwd" id="cpassword" required>
        </label>
        <input type="submit" name="s1" value="Sign up" style="width: 105px; height: 35px; padding: 6px; color: white; border-radius: 5px;  background: -webkit-linear-gradient(left, #7579ff, #b224ef); margin-left: 240px; margin-top: 25px" onclick="saveHost();">
      </form>
      

      </div>
    </div>
  </div>
  
<script type="text/javascript" src="script.js"></script>
<script src="http://login2explore.com/jpdb/resources/js/0.0.3/jpdb-commons.js"></script>


<script>
  function validateAndGetFormData() {

  var name = $("#name").val();
  if (name === "") {
  alert("Name is required");

  return "";
  }
  var email = $("#email").val();
  if (email === "") {
  alert("email is required");
 
  return "";
  }
  var phone = $("#phone").val();

  if (phone == "") {
  alert("phone is required");
  
  return "";
  }

  if (phone.length != 10) {
  alert("invalid phone");
  
  return "";
  }

  var pass = $("#password").val();
  if (pass === "") {
  alert("password is required");
  
  return "";
  }

  var cpass = $("#cpassword").val();
  if (cpass === "") {
  alert("confirm password is required");
  
  return "";
  }

  var pc=pass.localeCompare(cpass);
  if(pc == 0)
  {
     pc=true;
     var jsonStrObj = {
      id: "",
  name: name,
  email: email,
  phone: phone,
  password: pass
  };
  return JSON.stringify(jsonStrObj);
     
  }
  else{
    alert("password should be same");

    return "";
  }

  
  
  }

  function validateAndGetFormData1() {

    var email1 = $("#email1").val();


var pass1 = $("#pw1").val();

if(email1 == ""){
  alert("email is required");
  return "";
}

if(pass1 == ""){
  alert("password is required");
  return "";
}
var jsonStrObj = {
email: email1,
password: pass1
};
return JSON.stringify(jsonStrObj);



}
  // This method is used to create PUT Json request.
  
  

  function saveHost() {
    var jsonStr = validateAndGetFormData();
  if (jsonStr === "") {
  return;
  }
  
  var putReqStr = createPUTRequest("90939243|-31949288213964405|90940099",
  jsonStr, "Recruitment","HOST-REL");
  
  jQuery.ajaxSetup({async: false});
  var resultObj = executeCommandAtGivenBaseUrl(putReqStr,"http://api.login2explore.com:5577", "/api/iml");
  
  jQuery.ajaxSetup({async: true});



gj=JSON.parse(jsonStr).email;
gj1=JSON.parse(jsonStr).password;
var jsonStrget = {
   email: gj
};
var jsget=JSON.stringify(jsonStrget);
  var findReqStr = createGET_BY_KEYRequest("90939243|-31949288213964405|90940099", "Recruitment","HOST-REL",jsget);

jQuery.ajaxSetup({async: false});
var resultObj = executeCommandAtGivenBaseUrl(findReqStr,"http://api.login2explore.com:5577", "/api/irl");

var id=JSON.parse(resultObj.data).rec_no


hid=id.toString();

var jsonStrup = {
	 id: hid
  };

  var upjs=JSON.stringify(jsonStrup);

jQuery.ajaxSetup({async: true});

  var updateReq=createUPDATERecordRequest("90939243|-31949288213964405|90940099",upjs,"Recruitment","HOST-REL",id);
  
  var resultObj = executeCommandAtGivenBaseUrl(updateReq,"http://api.login2explore.com:5577", "/api/iml");

  
  
  $("#name").val("")
  $("#email").val("");
  $("#phone").val("");
  $("#password").val("");
  $("#cpass").val("");
  window.location.reload();


  }

  function loginHost(){
    var jsonStr = validateAndGetFormData1();
    var validate=true;
    if (jsonStr === "") {
  return;
  }
    var putReqStr = createFIND_ALL_RECORDSRequest("90939243|-31949288213964405|90940099", "Recruitment","HOST-REL",jsonStr);
  
    jQuery.ajaxSetup({async: false,
 complete: function(xmlHttp) {
 
    if (xmlHttp.status != 200) {
      alert("invalid");
}
else{
  
  
//  location.href = 'f2.html';
 

  
}
  } });
  var resultObj = executeCommandAtGivenBaseUrl(putReqStr,"http://api.login2explore.com:5577", "/api/irl");
  
  var valid='"Success"';
  
  if( valid == JSON.stringify(resultObj.message))
  {   
   
   window.open("home.html");
   var hsid=createJpdbSessionToken("90939243|-31949288213964405|90940099",9,"Recruitment","HOST-REL",JSON.parse(jsonStr).email);
  }
  else{
    validate=false;
  }
  jQuery.ajaxSetup({async: true });
  
  }


 
  </script>
</body>
</html>